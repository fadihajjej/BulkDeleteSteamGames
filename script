from unittest import skip
from helium import*
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from bs4 import BeautifulSoup
import time


driver = start_firefox()
go_to(r'https://help.steampowered.com/en/wizard/Login?redir=%2Fen%2Fwizard%2FHelpWithGame')



def login():
    username = "spectral_10k"
    password = "Zbag//Zbag"
    write(username, into="Steam account name")
    write(password, into="Password")
    click("Sign in")
    twofactorcode = input("two factorcode : ")
    write(twofactorcode, into="enter your code here")
    click("submit")
    
def delete_game():
    gf = open("games.txt","r")
    game = gf.readline()
    while (game != ""):
    
        write(game, into="SEARCH")
        time.sleep(3)
        try: 
            link =driver.find_element_by_css_selector("div.help_search_results_apps:nth-child(1) > a:nth-child(2)")
            link.click()
            click("I want to permanently remove this game from my account")
            html = driver.page_source
            soup = BeautifulSoup(html,"lxml")
            name = soup.find("div", {"class": "game_name"})
            
            
            B = input("Do you want to delete"+name.get_text()+"[y/n]: ")
            while B!="y" and B!="n":
                B = input("Do you want to delete"+name.get_text()+"[y/n]: ")
            if B=="n":
                go_to(r'https://help.steampowered.com/en/wizard/Login?redir=%2Fen%2Fwizard%2FHelpWithGame')
                game = gf.readline()
                
            else:
                click("Ok, remove the listed games from my account permanently")
                click('Return to Steam Support home')
                click('Games, Software, etc.')

                

            
        except:
            go_to(r'https://help.steampowered.com/en/wizard/Login?redir=%2Fen%2Fwizard%2FHelpWithGame')
        game = gf.readline()
login()
time.sleep(1)
delete_game()

    


